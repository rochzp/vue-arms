/*!
  * vue-arms v1.0.0
  * (c) 2019 Roc
  * @license MIT
  */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.VueArms=b())})(this,function(){'use strict';var c=Math.round,d=Math.floor;function a(a,b){return b={exports:{}},a(b,b.exports),b.exports}function b(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&-1===b.indexOf(d)&&(c[d]=a[d]);return c}Date.now=Date.now||function(){return new Date().getTime()};var e=Date.now(),f=function(){},g={noop:f,warn:function(){var a="object"==typeof console?console.warn:f;try{var b={warn:a};b.warn.call(b)}catch(a){return f}return a}(),key:"__bl",win:"object"==typeof window&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(a){if(Object.create)return Object.create(a);var b=function(){};return b.prototype=a,new b},each:function(a,b){var c=0,d=a.length;if(this.T(a,"Array"))for(;c<d&&!1!==b.call(a[c],a[c],c);c++);else for(c in a)if(!1===b.call(a[c],a[c],c))break;return a},safetyCall:function(a,b,c){if("function"!=typeof a)return c;try{return a.apply(this,b)}catch(a){return c}},T:function(a,b){var c=Object.prototype.toString.call(a).substring(8).replace("]","");return b?c===b:c},filterByRule:function(a,b){if(!a)return"";if(!b)return a;var c=this,d=c.T(b);return"Function"===d?c.safetyCall(b,[a],a):"Array"===d?(this.each(b,function(b){a=c.filterByRule(a,b)}),a):"Object"===d?a.replace(b.rule,b.target||""):a.replace(b,"")},ignoreByRule:function(b,c){if(!b||!c)return!1;if((this.isString(c)||c.source||"Function"===this.T(c))&&(c=[c]),!this.isArray(c))return g.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var d,f=[],h=0,j=c.length;h<j;h++)if(d=c[h],this.isString(d))f.push(d.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(d&&d.source)f.push(d.source);else if(d&&"Function"===this.T(d)&&!0===this.safetyCall(d,[b],!1))return!0;var i=new RegExp(f.join("|"),"i");return!!(f.length&&i.test&&i.test(b))},J:function(a){if(!a||"string"!=typeof a)return a;var b=null;try{b=JSON.parse(a)}catch(a){}return b},pick:function(a){var b=Math.ceil;return 1===a||1===b(Math.random()*a)},verifyConfig:function(a){if("sample"in a){var b=a.sample,c=b;b&&/^\d+(\.\d+)?%$/.test(b)&&(c=parseInt(100/parseFloat(b))),0<c&&1>c&&(c=parseInt(1/c)),1<=c&&100>=c?a.sample=c:delete a.sample}return a},on:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,function e(f){d&&a.removeEventListener(b,e,!1),c.call(this,f)},!1):a.attachEvent&&a.attachEvent("on"+b,function e(f){d&&a.detachEvent("on"+b,e),c.call(this,f)}),this},off:function(a,b,c){return c?(a.removeEventListener?a.removeEventListener(b,c):a.detachEvent&&a.detachEvent(b,c),this):this},delay:function(a,b){return-1===b?(a(),null):setTimeout(a,b||0)},ext:function(a){for(var b,c=arguments,d=1,f=arguments.length;d<f;d++)for(var g in b=c[d],b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g]);return a},sub:function(a,b){var c={};return this.each(a,function(a,d){-1!==b.indexOf(d)&&(c[d]=a)}),c},uu:function(){for(var a,b,c=20,d=Array(c),f=Date.now().toString(36).split("");0<c--;)b=(a=0|36*Math.random()).toString(36),d[c]=a%3?b:b.toUpperCase();for(var g=0;8>g;g++)d.splice(3*g+2,0,f[g]);return d.join("")},seq:function(){return(e++).toString(36)},decode:function(a){try{a=decodeURIComponent(a)}catch(a){}return a},encode:function(a,b){try{a=b?encodeURIComponent(a).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(a)}catch(a){}return a},serialize:function(a){a=a||{};var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&void 0!==a[c]&&b.push(c+"="+this.encode(a[c],"msg"==c));return b.join("&")},checkAPI:function(a,b){if(!a||"string"!=typeof a)return!1;var c=/arms-retcode[\w-]*\.aliyuncs/.test(a);return!c&&b&&(c=/(\.png)|(\.gif)|(alicdn\.com)/.test(a)),!c},checkAutoError:function(a){return a&&a.message&&!/failed[\w\s]+fetch/i.test(a.message)},cutUrlSearch:function(a){return a&&"string"==typeof a?a.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},createFakeToString:function(a){return function(){return a+"() { [native code] }"}},checkSameOrigin:function(a,b){if(!b||!a)return!1;var c="//"+b.split("/")[2];return a===b||a.slice(0,b.length+1)===b+"/"||a===c||a.slice(0,c.length+1)===c+"/"||!/^(\/\/|http:|https:).*/.test(a)},getRandIP:function(){for(var a,b=[],c=0;4>c;c++)a=d(256*Math.random()),b[c]=(15<a?"":"0")+a.toString(16);return b.join("")},getSortNum:function(a){return a?1e3<=(a+=1)&&9999>=a?a:1e3>a?a+1e3:a%1e4+1e3:1e3},getRandNum:function(a){return a&&"string"==typeof a?5>a.length?this.getNum(5):a.substring(a.length-5):this.getNum(5)},getNum:function(a){for(var b,c=[],e=0;e<a;e++)b=d(16*Math.random()),c[e]=b.toString(16);return c.join("")},isFunction:function(a){return"function"==typeof a},isPlainObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},joinRegExp:function(a){for(var b,c=[],d=0,f=a.length;d<f;d++)b=a[d],this.isString(b)?c.push(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")}},j=g,k=function(a,b){"object"==typeof a&&(a=j.serialize(a));var c=b+a;window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?window.navigator.sendBeacon(c,{}):j.warn("[arms] navigator.sendBeacon not surported")},l=a(function(a){var b=function(a,b){var c;{if("error"!==b.t||!(c=a.requestQueue[0])||"error"!==c.t||b.msg!==c.msg){if("behavior"===b.t){var d=a.requestQueue&&a.requestQueue.length;if(0<d&&"behavior"===a.requestQueue[d-1].t){var e=b.behavior||[];a.requestQueue[d-1].behavior.concat(e)}else a.requestQueue.push(b)}else a.requestQueue.unshift(b);return a.onReady(function(){a.requestTimmer=j.delay(function(){a.clear()},a.requestQueue[0]&&"error"===a.requestQueue[0].t?3e3:-1)}),!0}c.times++}},c=function(a){return this.ver="1.6.7",this._conf=j.ext({},c.dftCon),this.sampleCache={},this.requestQueue=[],this.hash=j.seq(),this.resetSession(),this.setConfig(a),this.rip=j.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this};c.dftCon={sample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[]},release:void 0,environment:"production"},c.prototype={constructor:c,onReady:function(a){return a()},getPage:function(){var a=this._conf.page;return j.safetyCall(a,[],a+"")},setPage:function(){},setConfig:function(a){a&&"object"==typeof a&&(j.verifyConfig(a),a=this.setImgUrl(a),this._conf=j.ext({},this._conf,a))},setImgUrl:function(a){var b=a.region,c=a.imgUrl;if(b){var d=j.regionMap[b];return a.imgUrl=d||j.defaultImgUrl,a}return c&&(a.imgUrl=c),a},checkImgUrl:function(a){if(this.getConfig("debug"))return!0;var b=j.regionMap,c=!1;for(var d in b)if(b[d]===a){c=!0;break}return!c&&j.warn("[retcode] invalid url: "+a),c},sendRequest:function(){},sendBeacon:function(a){k(a,this.getConfig("imgUrl"))},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(a){a&&"object"==typeof a&&(this._common=j.ext({},this._common,a))},resetSession:function(){this.session=j.uu(),this.sBegin=Date.now()},getTraceId:function(){var a=this.rip,b=Date.now(),c=j.getSortNum(this.record),d=a+b+c+j.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=d,this.record=c,{"EagleEye-TraceID":d}},getSessionId:function(){return{"EagleEye-SessionID":this.session}},getConfig:function(a){return a?this._conf[a]:j.ext({},this._conf)},sampling:function(a){return 1===a||("boolean"==typeof this.sampleCache[a]?this.sampleCache[a]:(this.sampleCache[a]=j.pick(a),this.sampleCache[a]))},clear:function(){var a;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var b=this._conf&&"function"==typeof this._conf.sendRequest;a=this.requestQueue.pop();)"res"===a.t?this.postData(a,"res"):"error"===a.t?this.postData(a,"err"):"behavior"===a.t?this.postData(a,"behavior"):"health"===a.t&&!b&&window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?this.sendBeacon(a):this.sendRequest(a);return this},_lg:function(c,d,e){var f=this._conf,g=this.getPage(),h=f.ignore||{},i=h.ignoreErrors,k=h.ignoreUrls,l=h.ignoreApis;return j.ignoreByRule(g,k)||j.ignoreByRule(j.decode(g),k)?this:"error"===c&&(j.ignoreByRule(d.msg,i)||j.ignoreByRule(j.decode(d.msg),i))?this:"api"===c&&(j.ignoreByRule(d.api,l)||j.ignoreByRule(j.decode(d.api),l))?this:this.checkImgUrl(f.imgUrl)&&d&&!f.disabled&&f.pid?e&&!this.sampling(e)?this:(d=j.ext({t:c,times:1,page:g,tag:f.tag||"",release:f.release||"",environment:f.environment,begin:Date.now()},d,this.commonInfo(),this._common,{pid:f.pid,_v:this.ver,sid:this.session,sampling:e||1,z:j.seq(),c1:f.c1,c2:f.c2,c3:f.c3}),b(this,d)):this},custom:function(a,b){if(!a||"object"!=typeof a)return this;var c=!1,d={begin:Date.now()};return j.each(a,function(a,b){return!(c=b&&20>=b.length)&&j.warn("[retcode] invalid key: "+b),d["x-"+b]=a,c}),c?this._lg("custom",d,b||1):this}},a.exports=c}),m=a(function(a){var b=["api","success","time","code","msg","trace","traceId","begin","sid","seq"],c=function(a,b){var c=a.split("::");return 1<c.length?j.ext({group:c[0],key:c[1]},b):j.ext({group:"default_group",key:c[0]},b)},d=function(a){l.call(this,a);var b;try{b="object"==typeof performance?performance.timing.fetchStart:Date.now()}catch(a){b=Date.now()}return this._startTime=b,this};d.prototype=j.createObject(l.prototype),j.ext(l.dftCon,{startTime:null}),j.ext(d.prototype,{constructor:d,_super:l,sum:function(a,b,d){try{return this._lg("sum",c(a,{val:b||1,begin:Date.now()}),d)}catch(a){j.warn("[retcode] can not get parseStatData: "+a)}},avg:function(a,b,d){try{return this._lg("avg",c(a,{val:b||0,begin:Date.now()}),d)}catch(a){j.warn("[retcode] can not get parseStatData: "+a)}},percent:function(a,b,d,e){try{return this._lg("percent",c(a,{subkey:b,val:d||0,begin:Date.now()}),e)}catch(b){j.warn("[retcode] can not get parseStatData: "+b)}},msg:function(a,b){if(a&&!(180<a.length))return this.custom({msg:a},b)},error:function(b,c){if(!b)return j.warn("[retcode] invalid param e: "+b),this;1===arguments.length?("string"==typeof b&&(b={message:b},c={}),"object"==typeof b&&(c=b=b.error||b)):("string"==typeof b&&(b={message:b}),"object"!=typeof c&&(c={}));var d=b.name||"CustomError",f=j.encode(b.message),g=j.encode(b.stack||"");c=c||{};var a={begin:Date.now(),cate:d,msg:f.substring(0,1e3),stack:g&&g.substring(0,1e3),file:c.filename||"",line:c.lineno||"",col:c.colno||"",err:{msg_raw:f,stack_raw:g}},h=(this.getConfig("ignore")||{}).ignoreErrors;return j.ignoreByRule(a.msg,h)||j.ignoreByRule(j.decode(a.msg),h)?this:(this.beforeSend&&this.beforeSend("error",a),this._lg("error",a,1))},behavior:function(a){if(a){var b="object"==typeof a&&a.behavior?a:{behavior:a};return this.beforeSend&&this.beforeSend("behavior",b),this._lg("behavior",b,1)}},api:function(d,f,g,h,i,a,k,l){if(!d)return j.warn("[retcode] api is null"),this;if(d="string"==typeof d?{api:d,success:f,time:g,code:h,msg:i,begin:a,traceId:k,sid:l}:j.sub(d,b),!j.checkAPI(d.api))return this;if(d.code=d.code||"",d.msg=d.msg||"",d.success=d.success?1:0,d.time=+d.time,d.begin=d.begin,d.traceId=d.traceId||"",d.sid=d.sid||"",!d.api||isNaN(d.time))return j.warn("[retcode] invalid time or api"),this;var m=(this.getConfig("ignore")||{}).ignoreApis;if(j.ignoreByRule(d.api,m)||j.ignoreByRule(j.decode(d.api),m))return this;this.beforeSend&&this.beforeSend("api",d);var c={type:"api",data:{message:i,url:d.api,status:h||""},timestamp:a};try{this.getConfig("behavior")&&this.addBehavior&&this.addBehavior(c)}catch(a){}return this._lg("api",d,d.success&&this.getConfig("sample"))},speed:function(b,c,d){var e=this,f=this.getConfig("startTime")||this._startTime;return /^s(\d|1[0])$/.test(b)?(c="number"==typeof c?c>=f?c-f:c:Date.now()-f,e.speedCache=e.speedCache||{},e.speedCache[b]=c,e.speedCache.begin=f,clearTimeout(e.speedTimmer),e.speedTimmer=setTimeout(function(){d||(e.speedCache.page=e.getPage(!0)),e._lg("speed",e.speedCache),e.speedCache=null},5e3),e):(j.warn("[retcode] invalid point: "+b),e)},performance:function(a){if(a){var b={};for(var c in a)(/^t([1-9]|1[0])$/.test(c)||"ctti"==c||"cfpt"==c)&&(b[c]=a[c]);"{}"!==JSON.stringify(b)&&(this.cPerfData=b)}},resource:function(b,c){if(!b||!j.isPlainObject(b))return j.warn("[arms] invalid param data: "+b),this;var d=Object.keys(b),e=["begin","dom","load","res","dl"],f=!1;for(var g in e)if(0>d.indexOf(e[g])){f=!0;break}if(f)return j.warn("[arms] lack param data: "+b),this;var h={begin:b.begin||Date.now(),dom:b.dom||"",load:b.load||"",res:j.isArray(b.res)?JSON.stringify(b.res):JSON.stringify([]),dl:b.dl||""};return this._lg("res",h,c)}}),d._super=l,d._root=l,l.Reporter=d,a.exports=d}),n=a(function(a){var b="object"==typeof window?window:{},d=b.__oFetch_||b.fetch;d="function"==typeof d?d:void 0,a.exports=function(a,f){var g=-1;"object"==typeof a&&(g=a.z,a=j.serialize(a));var h=f+a;if(d)return d(h,{method:"HEAD",mode:"no-cors"})["catch"](j.noop);if(b.document&&b.document.createElement){var k="__request_hold_"+g,c=b[k]=new Image;c.onload=c.onerror=function(){b[k]=void 0},c.src=h,c=null}}}),o=a(function(a){var b="object"==typeof window?window:{},c=b.__oXMLHttpRequest_||b.XMLHttpRequest;c="function"==typeof c?c:void 0,a.exports=function(a,b){try{var d=new c;d.open("POST",b,!0),d.setRequestHeader("Content-Type","text/plain"),d.send(JSON.stringify(a))}catch(a){j.warn("[retcode] Failed to log, exception is :\n"+a)}}}),p=function(b,d){var f,g=[],k=null,m=d&&d.location&&d.location.href,p=0,q=null,t=function(a,b,c){if(null!==a){var d=a[b];a[b]=c(d)}},c=function(b){var c,d,e,f,g,h=[];if(!b||!b.tagName)return"";if(h.push(b.tagName.toLowerCase()),b.id&&h.push("#".concat(b.id)),(c=b.className)&&"[object String]"===Object.prototype.toString.call(c))for(d=c.split(/\s+/),g=0;g<d.length;g++)h.push(".".concat(d[g]));var i=["type","name","title","alt"];for(g=0;g<i.length;g++)e=i[g],(f=b.getAttribute(e))&&h.push("[".concat(e,"=\"").concat(f,"\"]"));return h.join("")},e=function(b,d){return function(e){if(e&&e!==q){q=e;var g;try{g=e.target}catch(a){g="<unknown>"}if(0!==g.length){var h={type:"ui.".concat(b),data:{message:function(b){if(!b||1!==b.nodeType)return"";for(var d=b||null,e=[],f=0,g=0,h="";d&&5>f++&&!("html"===(h=c(d))||1<f&&80<=g+e.length*3+h.length);)e.push(h),g+=h.length,d=d.parentNode;return e.reverse().join(" > ")}(g)},timestamp:Date.now()};"click"===b?(p&&clearTimeout(p),d?p=setTimeout(function(){k&&k.addBehavior(h)},0):k&&k.addBehavior(h)):"keypress"==b&&(f||k&&k.addBehavior(h),clearTimeout(f),f=setTimeout(function(){f=void 0},100))}}}},l=function(){if(function(){var a=d&&d.chrome,b=a&&a.app&&a.app.runtime,c="history"in d&&!!d.history.pushState&&!!d.history.replaceState;return!b&&c}()){var a=function(a,b){k&&k.addBehavior({type:"navigation",data:{from:a,to:b}}),m=b},b=d.onpopstate;d.onpopstate=function(){for(var c=arguments,e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=c[g];var h=d.location.href;if(a(m,h),b)return b.apply(this,f)};var c=function(b){return function(){for(var c=arguments,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=c[f];var g=2<e.length?e[2]:void 0;return g&&a(m,g+""),b.apply(this,e)}};t(d.history,"pushState",c),t(d.history,"replaceState",c)}};j.ext(b.prototype,{addBehavior:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=1<arguments.length?arguments[1]:void 0;if(this.getConfig("behavior")){var f=c&&0<c?min(c,100):100;return(b=j.ext({},{type:"default",data:{},timestamp:Date.now(),page:d&&d.location&&d.location.pathname},b)).data&&b.data.message&&(b.data.message=j.encode(b.data.message)),g.push(b),g=g.slice(-f)}},getBehavior:function(){return g||[]},setBehavior:function(a){return a&&(g=a),g},reportBehavior:function(a){var b=this;b.getConfig("behavior")&&(b.sendBhTimer=setTimeout(function(){g&&0<g.length&&(b.behavior(g),g=[],b.sendBhTimer=void 0,a&&a())},0))},initBehavior:function(){return this.hasInitBehavior||k||(!function(){if(document&&document.referrer&&document.location){var a=document.referrer,b=document.location.href;if(""!==a){m=b,k&&k.addBehavior({type:"navigation",data:{from:a,to:b}})}}}(),function(){if(d&&d.console)for(var b,c=["debug","info","warn","log","error","assert"],e=0;c.length;e++){if(b=c[e],!d.console[b])return;t(d.console,b,function(f){var e=b;return function(){for(var b=arguments,g=arguments.length,a=Array(g),h=0;h<g;h++)a[h]=b[h];if(k&&k.addBehavior({type:"console",data:{level:e,message:a}}),"error"===e)for(var j,l=0;l<a.length;l++)j=a[l],j&&j.message&&j.stack&&k&&k.errorHandler(new ErrorEvent("error",{error:j,message:j.message}));f&&Function.prototype.apply.call(f,d.console,a)}})}}(),d&&d.document&&d.document.addEventListener&&(d.document.addEventListener("click",e("click"),!1),d.document.addEventListener("keypress",e("keypress"),!1)),l(),k=this,this.hasInitBehavior=!0),this}})},q={TIMING_KEYS:["","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart"]},s=q.TIMING_KEYS,u=function(){var b=j.win||{},d=b.performance;if(!d||"object"!=typeof d)return null;var g={},e=d.timing||{},h=Date.now(),k=1;if("function"==typeof b.PerformanceNavigationTiming){var a=d.getEntriesByType("navigation")[0];a&&(e=a,k=2)}j.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(b,d){var f=e[s[b[1]]],a=e[s[b[0]]];if(2==k||0<f&&0<a){var h=c(a-f);0<=h&&36e5>h&&(g[d]=h)}});var l=b.navigator.connection,m=d.navigation||{};g.ct=l?l.effectiveType||l.type:"";var f=l?l.downlinkMax||l.bandwidth||-1:-1;if(f=999<f?999:f,g.bandwidth=f,g.navtype=1===m.type?"Reload":"Other",1==k&&0<e[s[16]]&&0<e[s[1]]){var n=e[s[16]]-e[s[1]];0<=n&&36e5>n&&(g.fpt=n)}return g.begin=1==k&&0<e[s[1]]?e[s[1]]:2==k&&0<g.load?h-g.load:h,g},v=q.TIMING_KEYS,w=function(){var a=j.win||{},b=a.performance;if(!b||"object"!=typeof b||"function"!=typeof b.getEntriesByType)return null;var d={},f=b.timing||{},e=b.getEntriesByType("resource")||[];if(d.begin=f[v[1]]||Date.now(),"function"==typeof a.PerformanceNavigationTiming){var g=b.getEntriesByType("navigation")[0];g&&(f=g)}return j.each({dom:[10,8],load:[14,1]},function(b,g){var e=f[v[b[1]]],h=f[v[b[0]]];if(0<e&&0<h){var i=c(h-e);0<=i&&36e5>i&&(d[g]=i)}}),d.res=JSON.stringify(e),d},x=function(a,b,i){var k=j,m=null,n=i.documentElement,e=b.innerWidth||n.clientWidth||i.body.clientWidth,h=b.innerHeight||n.clientHeight||i.body.clientHeight,c=b.navigator.connection,d={sr:screen.width+"x"+screen.height,vp:e+"x"+h,ct:c?c.effectiveType||c.type:""},l={},p=function(b,d,e,a,f){if(void 0===d){var g,j;if(!l[b]){g=new RegExp(b+"=([^;]+)");try{j=g.exec(i.cookie)}catch(a){return k.warn("[retcode] can not get cookie:",a),null}j&&(l[b]=j[1])}return l[b]}var m=b+"="+d;a&&(m+="; domain="+a),m+="; path="+(f||"/"),e&&(m+="; max-age="+e);try{return i.cookie=m,!!i.cookie}catch(a){return k.warn("[retcode] can not set cookie: ",a),!1}},f=function(a){var b=a._conf.uid||p("_nk_")||p("_bl_uid");return!b&&(b=k.uu(),!p("_bl_uid",b,15552e3))?null:b};return k.ext(a.prototype,{activeErrHandler:function(a){return m&&!a?this:(m=this,this)},errorHandler:function(a){if(!a)return this;var b=a.type;"error"===b?this.error(a.error||{message:a.message},a):"unhandledrejection"===b&&k.T(a.reason,"Error")&&k.checkAutoError(a.reason)&&this.error(a.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch(a){}return this},sendPerformance:function(a){var b=this;b.onReady(function(){var c=u();c&&(c.page=b.getPage(!0),a&&(c=k.ext(c,a)),b.cPerfData&&(c=k.ext(c,b.cPerfData)),b._lg("perf",c,b.getConfig("sample")))})},sendResources:function(a){var b=this;b.onReady(function(){var c=w();c&&(c.load&&2e3>=c.load||c.load&&8e3>=c.load&&.05<Math.random()||(c.page=b.getPage(!0),c.dl=location.href,a&&(c=k.ext(c,a)),b._lg("res",c,b.getConfig("sample"))))})},sendPV:function(){var a=this;a.onReady(function(){var c=function(c){var d=f(c),e=b.devicePixelRatio||1;return{uid:d,dt:i.title,dl:location.href,dr:i.referrer,dpr:e.toFixed(2),de:(i.characterSet||i.defaultCharset||"").toLowerCase(),ul:n.lang,begin:Date.now()}}(a);c&&c.uid&&a._lg("pv",c)})},commonInfo:function(){return d.uid=f(this),d},handleUnload:function(a){var b=Date.now();return 200>b-this._lastUnload?this:void(this._lastUnload=b,this.sendHealth(a),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this.clear())},bindHashChange:function(a){var c=this;return!a^c.hashChangeHandler?c:void(a?(c.hackHistoryState(),c.hashChangeHandler=function(a){var b=c._conf.parseHash(location.hash);b&&c.setPage(b,!1!==a)},c.stateChangeHandler=function(a){var b=c._conf.parseHash(a.detail);b&&c.setPage(b)},k.on(b,"hashchange",c.hashChangeHandler),k.on(b,"historystatechange",c.stateChangeHandler),c.hashChangeHandler(!1)):(k.off(b,"hashchange",c.hashChangeHandler),k.off(b,"historystatechange",c.stateChangeHandler),c.hashChangeHandler=null,c.stateChangeHandler=null))},initHandler:function(){var a=this;if(a.hasInitHandler)return a;var c=a._conf;return k.on(b,"beforeunload",function(){a.handleUnload(0)}),a.bindHashChange(c.enableSPA),a.activeErrHandler(!1),a.hasInitHandler=!0,a}}),k.on(b,"error",function(a){m&&m.errorHandler(a)}).on(b,"unhandledrejection",function(a){m&&m.errorHandler(a)}),a},y=500,z=function(b,d,f){function g(b,d,e){var f=0,h=b.tagName;if("SCRIPT"!==h&&"STYLE"!==h&&"META"!==h&&"HEAD"!==h){var j=b.children?b.children.length:0;if(0<j)for(var c=b.children,a=j-1;0<=a;a--)f+=g(c[a],d+1,0<f);if(0>=f&&!e&&!(b.getBoundingClientRect&&b.getBoundingClientRect().top<k))return 0;f+=1+.5*d}return f}function h(a){for(var b=1;b<a.length;b++)if(a[b].score<a[b-1].score)return a.splice(b,1),h(a);return a}var k=d.innerHeight||0,m=[],p=null,q=0;j.ext(b.prototype,{initFmpObserver:function(a){var b=this;if(!b._conf||!b._conf.useFmp)return null;if(!d.MutationObserver)return j.warn("[retcode] first meaningful paint can not be retrieved"),b.sendPerformance(),null;j.on(d,"beforeunload",function(){b.endObserving(0,!0)});var c=d.MutationObserver;return(p=new c(function(){!function(a){var b=Date.now()-a,c=f.querySelector("body");if(c){var d=0;d+=g(c,1,!1),m.push({score:d,t:b})}else m.push({score:0,t:b})}(b._startTime)})).observe(document,{childList:!0,subtree:!0}),q=1,b.onReady(function(){b.endObserving(a)}),p},endObserving:function(a,b){var c=this;if(p&&q)if(b||!function(a,b){var c=Date.now()-a;return!(c>b||c-(m&&m.length&&m[m.length-1].t||0)>2*y)}(c._startTime,a)){p.disconnect(),q=0,m=h(m);for(var d=null,e=1;e<m.length;e++)if(m[e].t>=m[e-1].t){var f=m[e].score-m[e-1].score;(!d||d.rate<=f)&&(d={t:m[e].t,rate:f})}d&&0<d.t&&36e5>d.t?c.sendPerformance({fmp:d.t}):c.sendPerformance()}else j.delay(function(){c.endObserving(a)},y)}})},A=function(b,k){var m=j,q=null,v=function(a,b,d,e,j,k,i,n,o,l){var c=m.J(j)||null,g=m.safetyCall(b,[c,e],null);if(!g)return!1;var p=g.code||k,f=!("success"in g)||g.success;a.api(d,f,i,p,g.msg,n,o,l)};return m.ext(b.prototype,{removeHook:function(b,c){return q&&(c||this===q)?(k.__oFetch_&&(k.fetch=k.__oFetch_,delete k.__oFetch_),k.__oXMLHttpRequest_&&(k.XMLHttpRequest=k.__oXMLHttpRequest_,delete k.__oXMLHttpRequest_),q=null,this):this},addHook:function(a){return!a&&q?this:(q||(function(){if("function"==typeof k.fetch){var a=k.fetch;k.__oFetch_=a,k.fetch=function(b,e){var i=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),j=q;if(!j||!j.api)return a.apply(k,i);if(e&&("HEAD"===e.method||"no-cors"===e.mode))return a.apply(k,i);var p=Date.now(),l=j._conf,c=(b&&"string"!=typeof b?b.url:b)||"",n=c;if(c=m.cutUrlSearch(c),!m.checkAPI(c,!0))return a.apply(k,i);c=m.filterByRule(c,l.ignoreApiPath?l.ignoreApiPath:l.apiHelper);var o=l.enableLinkTrace,f="",r="",s=j.getConfig("pid");if(o){var d="";try{d=location.origin?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(a){d=""}if(m.checkSameOrigin(n,d)){if(b&&"string"!=typeof b)try{if(i[0].headers&&"function"==typeof i[0].headers.get&&"function"==typeof i[0].headers.append){var t=i[0].headers.get("EagleEye-TraceID"),u=i[0].headers.get("EagleEye-SessionID"),w=i[0].headers.get("EagleEye-pAppName");t?f=t:(f=j.getTraceId()["EagleEye-TraceID"],i[0].headers.append("EagleEye-TraceID",f)),u?r=u:(r=j.getSessionId()["EagleEye-SessionID"],i[0].headers.append("EagleEye-SessionID",r)),w||i[0].headers.append("EagleEye-pAppName",s)}}catch(a){m.warn("[retcode] fetch failed to set header, exception is :\n"+a)}e&&(e.headers=e.headers?e.headers:{},e.headers["EagleEye-TraceID"]?f=e.headers["EagleEye-TraceID"]:(f=j.getTraceId()["EagleEye-TraceID"],e.headers["EagleEye-TraceID"]=f),e.headers["EagleEye-SessionID"]?r=e.headers["EagleEye-SessionID"]:(r=j.getSessionId()["EagleEye-SessionID"],e.headers["EagleEye-SessionID"]=r),e.headers["EagleEye-pAppName"]||(e.headers["EagleEye-pAppName"]=s))}}return a.apply(k,i).then(function(b){if(!j||!j.api)return b;var d=b.clone(),e=d.headers;if(e&&"function"==typeof e.get){var a=e.get("content-type");if(a&&!/(text)|(json)/.test(a))return b}var g=Date.now()-p;return d.ok?d.text().then(function(a){v(j,l.parseResponse,c,n,a,d.status||200,g,p,f,r)}):j.api(c,!1,g,d.status||404,d.statusText,p,f,r),b})["catch"](function(a){if(!j||!j.api)throw a;var b=Date.now()-p;throw j.api(c,!1,b,a.name||"Error",a.message,p,f,r),a})},k.fetch.toString=m.createFakeToString("fetch")}}(),function(){if("function"==typeof k.XMLHttpRequest){var a=k.XMLHttpRequest;k.__oXMLHttpRequest_=a,k.XMLHttpRequest=function(b){var j=new a(b),k=q;if(!k||!k.api||!j.addEventListener)return j;var i,o,w,n=j.send,c=j.open,e=j.setRequestHeader,g=k._conf,f=k.getConfig("enableLinkTrace"),h="",u="",t="";return j.open=function(a,b){var d=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);if(c.apply(j,d),w=b||"",o=m.cutUrlSearch(w),o=o?m.filterByRule(o,g.ignoreApiPath?g.ignoreApiPath:g.apiHelper):"",f){var i="";try{i=location.origin?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(a){i=""}m.checkSameOrigin(w,i)&&e&&"function"==typeof e&&(h=k.getTraceId()["EagleEye-TraceID"],e.apply(j,["EagleEye-TraceID",h]),u=k.getSessionId()["EagleEye-SessionID"],e.apply(j,["EagleEye-SessionID",u]),t=k.getConfig("pid"),e.apply(j,["EagleEye-pAppName",t]))}},j.send=function(){i=Date.now();var a=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);n.apply(j,a)},m.on(j,"readystatechange",function(){if(o&&4===j.readyState){var b=Date.now()-i;if(200<=j.status&&299>=j.status){var c=j.status||200;if("function"==typeof j.getResponseHeader){var d=j.getResponseHeader("Content-Type");if(d&&!/(text)|(json)/.test(d))return}j.responseType&&"text"!==j.responseType?k.api(o,!0,b,c,"",i,h,u):v(k,g.parseResponse,o,w,j.responseText,c,b,i,h,u)}else k.api(o,!1,b,j.status||"FAILED",j.statusText,i,h,u)}}),j},k.XMLHttpRequest.toString=m.createFakeToString("XMLHttpRequest")}}()),q=this,this)},initHook:function(){return this.hasInitHook?this:(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0,this)}}),b},B=function(b,c){var g=j,d=c.history||{},e=c.document,a=function(b,d){var f;c.CustomEvent?f=new CustomEvent(b,{detail:d}):((f=e.createEvent("HTMLEvents")).initEvent(b,!1,!0),f.detail=d),c.dispatchEvent(f)},f=function(b){var i=d[b];"function"==typeof i&&(d[b]=function(e,j,k){var c=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),m=location.href,n=i.apply(d,c);if(!k||"string"!=typeof k)return n;if(k===m)return n;try{var h=m.split("#"),l=k.split("#"),o=g.cutUrlSearch(h[0]),p=g.cutUrlSearch(l[0]),f=h[1]&&h[1].replace(/^\/?(.*)/,"$1"),q=l[1]&&l[1].replace(/^\/?(.*)/,"$1");o===p?f!==q&&a("historystatechange",q):a("historystatechange",p)}catch(a){g.warn("[retcode] error in "+b+": "+a)}return n},d[b].toString=g.createFakeToString(b))};g.ext(b.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState?this:(f("pushState"),f("replaceState"),this.hasHackedHistoryState=!0,this)}})},C=a(function(a){var b=j.win,c=b.document,d=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,e=function(a){var c=this;return m.call(c,a),c._initialPage=a.page&&j.safetyCall(a.page,[],a.page+"")||null,c._health={errcount:0,apisucc:0,apifail:0},c.beforeSend=function(a,b){"error"===a?c._health.errcount++:"api"==a&&c._health[b.success?"apisucc":"apifail"]++},!1!==a.enableInstanceAutoSend&&(c.initHandler(),c.initHook(),c.initFmpObserver(1e4),c._conf&&c._conf.behavior&&c.initBehavior()),Object.defineProperty&&b.addEventListener&&Object.defineProperty(c,"pipe",{set:c.sendPipe}),c};e.prototype=j.createObject(m.prototype),j.ext(m._root.dftCon,{uid:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],apiHelper:{rule:/(\w+)\/\d{2,}/g,target:"$1"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",disableHook:!1,autoSendPv:!0,enableSPA:!1,enableLinkTrace:!1,sendResource:!0,behavior:!0,parseHash:function(a){return(a?j.cutUrlSearch(a.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(a){if(!a||"object"!=typeof a)return{};var b=a.code,c=a.msg||a.message||a.subMsg||a.errorMsg||a.ret||a.errorResponse||"";return"object"==typeof c&&(b=b||c.code,c=c.msg||c.message||c.info||c.ret||JSON.stringify(c)),{msg:c,code:b,success:!0}}}),j.ext(e.prototype,{constructor:e,_super:m,onReady:function(a){var d=this;return d.hasReady?a():void("complete"===c.readyState?(d.hasReady=!0,a()):j.on(b,"load",function(){d.hasReady=!0,a()},!0))},getPage:function(a){var b=this._conf,c=b.page,d=location,e=d.host+d.pathname;return c&&!a?j.safetyCall(c,[],c+""):this._initialPage||j.filterByRule(b.ignoreUrlCase?e.toLowerCase():e,b.ignoreUrlPath?b.ignoreUrlPath:b.urlHelper)},setPage:function(a,b){var c=this,d=c.prevPage;if(!1!==b){if(!a||a===d)return c;c.prevPage=a,clearTimeout(c.sendPVTimmer),c.handleUnload(1),c.resetSession(),c.sendPVTimmer=setTimeout(function(){c.sendPV()},10)}else c.prevPage=a;return c._conf.page=a,c},setConfig:function(a,b){if(a&&"object"==typeof a){j.verifyConfig(a),a=this.setImgUrl(a);var c=this._conf;if(this._conf=j.ext({},c,a),!b){var d="disableHook";d in a&&c[d]!==a[d]&&(a[d]?this.removeHook():this.addHook()),(d="enableSPA")in a&&c[d]!==a[d]&&this.bindHashChange(a[d])}}},sendRequest:function(a){n(a,this.getConfig("imgUrl"))},postData:function(a,b){var c={};c[b]=a[b],delete a[b];var d="";"object"==typeof a&&(d=j.serialize(a)),o(c,this.getConfig("imgUrl")+d+"&post_res=")},sendPipe:function(a){var b=this;if(!a||!a.length)return b;try{if("Array"===j.T(a[0]))return j.each(a,function(a){return b.sendPipe(a)});if("Array"!==j.T(a))return b;var c=a.shift();if(!d.test(c))return b;b[c].apply(b,a)}catch(a){return j.warn("[retcode] error in sendPipe",a),b}},sendHealth:function(){var a=j.ext({},this._health);a.healthy=0<a.errcount?0:1,a.begin=Date.now();var b=a.begin-this.sBegin;a.stay=b,this._lg("health",a,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(a){a=j.ext({pid:this._conf.pid},a);var b=this.__proto__.constructor(a);return a.page&&b.sendPV(),b}}),p(e,b),x(e,b,c),z(e,b,c),A(e,b),B(e,b),e._super=m,e._root=m._root,m.Browser=e,a.exports=e}),D=a(function(a){function b(a,b){var c=d[g]=new f(a);c.sendPipe(b);var e=c._conf;return!1!==e.autoSendPv&&c.sendPV(),e&&e.useFmp||c.sendPerformance(),e&&e.sendResource&&c.sendResources(),d[h]=!0,c}function c(){if(d[h])return d[g];var a={},c=[];return g in d&&(a=d[g].config||{},c=d[g].pipe||[]),b(a,c)}var d=window,f=d.BrowserLogger=C,g=j.key,h="__hasInitBlSdk";f.singleton=function(a,c){return d.__hasInitBlSdk?d[g]:b(a,c)},f.createExtraInstance=function(a){a&&"object"==typeof a&&!0!==a.enableInstanceAutoSend&&(a.enableInstanceAutoSend=!1);var b=new f(a),c=b._conf;return c.enableInstanceAutoSend&&(!1!==c.autoSendPv&&b.sendPV(),c&&c.useFmp||b.sendPerformance(),c&&c.sendResource&&b.sendResources()),b};var i="object"==typeof window&&!!window.navigator;i&&d[g]&&(f.bl=c(d.__hasInitBlSdk)),a.exports=f}),E=/(?:^|[-_])(\w)/g,F=function(a){return a.replace(E,function(a){return a.toUpperCase()}).replace(/[-_]/g,"")},G=function(a,b){if(a.$root===a)return"<Root>";var c="function"==typeof a&&null!=a.cid?a.options:a._isVue?a.$options||a.constructor.options:a,d=c.name||c._componentTag,e=c.__file;if(!d&&e){var f=e.match(/([^/\\]+)\.vue$/);d=f&&f[1]}return(d?"<"+F(d)+">":"<Anonymous>")+(e&&!1!==b?" at "+e:"")},H=function(a,b){for(var c="";b;)1==b%2&&(c+=a),1<b&&(a+=a),b>>=1;return c},I=function(a){if(a._isVue&&a.$parent){for(var b=[],c=0;a;){if(0<b.length){var d=b[b.length-1];if(d.constructor===a.constructor){c++,a=a.$parent;continue}else 0<c&&(b[b.length-1]=[d,c],c=0)}b.push(a),a=a.$parent}return"\n\nfound in\n\n"+b.map(function(a,b){return""+(0===b?"---> ":H(" ",5+2*b))+(Array.isArray(a)?G(a[0])+"... ("+a[1]+" recursive calls)":G(a))}).join("\n")}return"\n\n(found in "+G(a)+")"},J=function(a,c){var d=a.pipe,e=b(a,["pipe"]),f=e;if(this.config=f||{},this.pipe=d,this.useArmsEnvs=c,!c||c&&c.includes("production")){var g=Object.assign({},f);try{if(g.pid)return this.logger=D.singleton(g,d),this.logger.install=this.install,this.logger;throw new Error("cannot find pid")}catch(a){throw a}}};return J.prototype.install=function(a,b){var c=this;void 0===b&&(b={});var d=b.useArmsEnvs;if(void 0===d&&(d=this.useArmsEnvs),!d||d&&d.includes("production")){var e=a.config.errorHandler,f=function(a,b,d){if(c.error(a,{filename:b.$vnode.tag+", "+d}),"undefined"!=typeof console&&"function"==typeof console.error&&!1){var f=b?I(b):"",g="Error in "+d+": \""+a.toString()+"\"";console.error("[Vue warn]: "+g+f)}"function"==typeof e&&e.call(c,a,b,d)};a.config.errorHandler=f,window.addEventListener("error",function(a){c.error(a.error,a)}),window.addEventListener("unhandledrejection",function(a){c.error(a.error,a)}),a.prototype.$logger=this}},J});
