/*!
  * vue-arms v1.0.0
  * (c) 2019 Roc
  * @license MIT
  */function createCommonjsModule(a,b){return b={exports:{}},a(b,b.exports),b.exports}Date.now=Date.now||function(){return new Date().getTime()};var SEQUENCE=Date.now(),noop=function(){},getCwarn=function(){var a="object"==typeof console?console.warn:noop;try{var b={warn:a};b.warn.call(b)}catch(a){return noop}return a},util={noop:noop,warn:getCwarn(),key:"__bl",win:"object"==typeof window&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(a){if(Object.create)return Object.create(a);var b=function(){};return b.prototype=a,new b},each:function(a,b){var c=0,d=a.length;if(this.T(a,"Array"))for(;c<d&&!1!==b.call(a[c],a[c],c);c++);else for(c in a)if(!1===b.call(a[c],a[c],c))break;return a},safetyCall:function(a,b,c){if("function"!=typeof a)return c;try{return a.apply(this,b)}catch(a){return c}},T:function(a,b){var c=Object.prototype.toString.call(a).substring(8).replace("]","");return b?c===b:c},filterByRule:function(a,b){if(!a)return"";if(!b)return a;var c=this,d=c.T(b);return"Function"===d?c.safetyCall(b,[a],a):"Array"===d?(this.each(b,function(b){a=c.filterByRule(a,b)}),a):"Object"===d?a.replace(b.rule,b.target||""):a.replace(b,"")},ignoreByRule:function(b,c){if(!b||!c)return!1;if((this.isString(c)||c.source||"Function"===this.T(c))&&(c=[c]),!this.isArray(c))return util.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var d,f=[],g=0,h=c.length;g<h;g++)if(d=c[g],this.isString(d))f.push(d.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(d&&d.source)f.push(d.source);else if(d&&"Function"===this.T(d)&&!0===this.safetyCall(d,[b],!1))return!0;var i=new RegExp(f.join("|"),"i");return!!(f.length&&i.test&&i.test(b))},J:function(a){if(!a||"string"!=typeof a)return a;var b=null;try{b=JSON.parse(a)}catch(a){}return b},pick:function(a){return 1===a||1===Math.ceil(Math.random()*a)},verifyConfig:function(a){if("sample"in a){var b=a.sample,c=b;b&&/^\d+(\.\d+)?%$/.test(b)&&(c=parseInt(100/parseFloat(b))),0<c&&1>c&&(c=parseInt(1/c)),1<=c&&100>=c?a.sample=c:delete a.sample}return a},on:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,function e(f){d&&a.removeEventListener(b,e,!1),c.call(this,f)},!1):a.attachEvent&&a.attachEvent("on"+b,function e(f){d&&a.detachEvent("on"+b,e),c.call(this,f)}),this},off:function(a,b,c){return c?(a.removeEventListener?a.removeEventListener(b,c):a.detachEvent&&a.detachEvent(b,c),this):this},delay:function(a,b){return-1===b?(a(),null):setTimeout(a,b||0)},ext:function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var f in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a},sub:function(a,b){var c={};return this.each(a,function(a,d){-1!==b.indexOf(d)&&(c[d]=a)}),c},uu:function(){for(var a,b,c=20,d=Array(c),f=Date.now().toString(36).split("");0<c--;)b=(a=0|36*Math.random()).toString(36),d[c]=a%3?b:b.toUpperCase();for(var g=0;8>g;g++)d.splice(3*g+2,0,f[g]);return d.join("")},seq:function(){return(SEQUENCE++).toString(36)},decode:function(a){try{a=decodeURIComponent(a)}catch(a){}return a},encode:function(a,b){try{a=b?encodeURIComponent(a).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(a)}catch(a){}return a},serialize:function(a){a=a||{};var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&a[c]!==void 0&&b.push(c+"="+this.encode(a[c],"msg"==c));return b.join("&")},checkAPI:function(a,b){if(!a||"string"!=typeof a)return!1;var c=/arms-retcode[\w-]*\.aliyuncs/.test(a);return!c&&b&&(c=/(\.png)|(\.gif)|(alicdn\.com)/.test(a)),!c},checkAutoError:function(a){return a&&a.message&&!/failed[\w\s]+fetch/i.test(a.message)},cutUrlSearch:function(a){return a&&"string"==typeof a?a.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},createFakeToString:function(a){return function(){return a+"() { [native code] }"}},checkSameOrigin:function(a,b){if(!b||!a)return!1;var c="//"+b.split("/")[2];return a===b||a.slice(0,b.length+1)===b+"/"||a===c||a.slice(0,c.length+1)===c+"/"||!/^(\/\/|http:|https:).*/.test(a)},getRandIP:function(){for(var a=Math.floor,b,c=[],d=0;4>d;d++)b=a(256*Math.random()),c[d]=(15<b?"":"0")+b.toString(16);return c.join("")},getSortNum:function(a){return a?1e3<=(a+=1)&&9999>=a?a:1e3>a?a+1e3:a%1e4+1e3:1e3},getRandNum:function(a){return a&&"string"==typeof a?5>a.length?this.getNum(5):a.substring(a.length-5):this.getNum(5)},getNum:function(a){for(var b=Math.floor,c,d=[],e=0;e<a;e++)c=b(16*Math.random()),d[e]=c.toString(16);return d.join("")},isFunction:function(a){return"function"==typeof a},isPlainObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},joinRegExp:function(a){for(var b,c=[],d=0,f=a.length;d<f;d++)b=a[d],this.isString(b)?c.push(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")}},util_1=util,sendBeacon=function(a,b){"object"==typeof a&&(a=util_1.serialize(a));var c=b+a;window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?window.navigator.sendBeacon(c,{}):util_1.warn("[arms] navigator.sendBeacon not surported")},base=createCommonjsModule(function(a){var b=function(a,b){var c;{if("error"!==b.t||!(c=a.requestQueue[0])||"error"!==c.t||b.msg!==c.msg){if("behavior"===b.t){var d=a.requestQueue&&a.requestQueue.length;if(0<d&&"behavior"===a.requestQueue[d-1].t){var e=b.behavior||[];a.requestQueue[d-1].behavior.concat(e)}else a.requestQueue.push(b)}else a.requestQueue.unshift(b);return a.onReady(function(){a.requestTimmer=util_1.delay(function(){a.clear()},a.requestQueue[0]&&"error"===a.requestQueue[0].t?3e3:-1)}),!0}c.times++}},c=function(a){return this.ver="1.6.7",this._conf=util_1.ext({},c.dftCon),this.sampleCache={},this.requestQueue=[],this.hash=util_1.seq(),this.resetSession(),this.setConfig(a),this.rip=util_1.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this};c.dftCon={sample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[]},release:void 0,environment:"production"},c.prototype={constructor:c,onReady:function(a){return a()},getPage:function(){var a=this._conf.page;return util_1.safetyCall(a,[],a+"")},setPage:function(){},setConfig:function(a){a&&"object"==typeof a&&(util_1.verifyConfig(a),a=this.setImgUrl(a),this._conf=util_1.ext({},this._conf,a))},setImgUrl:function(a){var b=a.region,c=a.imgUrl;if(b){var d=util_1.regionMap[b];return a.imgUrl=d||util_1.defaultImgUrl,a}return c&&(a.imgUrl=c),a},checkImgUrl:function(a){if(this.getConfig("debug"))return!0;var b=util_1.regionMap,c=!1;for(var d in b)if(b[d]===a){c=!0;break}return!c&&util_1.warn("[retcode] invalid url: "+a),c},sendRequest:function(){},sendBeacon:function(a){sendBeacon(a,this.getConfig("imgUrl"))},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(a){a&&"object"==typeof a&&(this._common=util_1.ext({},this._common,a))},resetSession:function(){this.session=util_1.uu(),this.sBegin=Date.now()},getTraceId:function(){var a=this.rip,b=Date.now(),c=util_1.getSortNum(this.record),d=a+b+c+util_1.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=d,this.record=c,{"EagleEye-TraceID":d}},getSessionId:function(){return{"EagleEye-SessionID":this.session}},getConfig:function(a){return a?this._conf[a]:util_1.ext({},this._conf)},sampling:function(a){return 1===a||("boolean"==typeof this.sampleCache[a]?this.sampleCache[a]:(this.sampleCache[a]=util_1.pick(a),this.sampleCache[a]))},clear:function(){var a;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var b=this._conf&&"function"==typeof this._conf.sendRequest;a=this.requestQueue.pop();)"res"===a.t?this.postData(a,"res"):"error"===a.t?this.postData(a,"err"):"behavior"===a.t?this.postData(a,"behavior"):"health"===a.t&&!b&&window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?this.sendBeacon(a):this.sendRequest(a);return this},_lg:function(c,d,e){var f=this._conf,g=this.getPage(),h=f.ignore||{},i=h.ignoreErrors,j=h.ignoreUrls,k=h.ignoreApis;return util_1.ignoreByRule(g,j)||util_1.ignoreByRule(util_1.decode(g),j)?this:"error"===c&&(util_1.ignoreByRule(d.msg,i)||util_1.ignoreByRule(util_1.decode(d.msg),i))?this:"api"===c&&(util_1.ignoreByRule(d.api,k)||util_1.ignoreByRule(util_1.decode(d.api),k))?this:this.checkImgUrl(f.imgUrl)&&d&&!f.disabled&&f.pid?e&&!this.sampling(e)?this:(d=util_1.ext({t:c,times:1,page:g,tag:f.tag||"",release:f.release||"",environment:f.environment,begin:Date.now()},d,this.commonInfo(),this._common,{pid:f.pid,_v:this.ver,sid:this.session,sampling:e||1,z:util_1.seq(),c1:f.c1,c2:f.c2,c3:f.c3}),b(this,d)):this},custom:function(a,b){if(!a||"object"!=typeof a)return this;var c=!1,d={begin:Date.now()};return util_1.each(a,function(a,b){return!(c=b&&20>=b.length)&&util_1.warn("[retcode] invalid key: "+b),d["x-"+b]=a,c}),c?this._lg("custom",d,b||1):this}},a.exports=c}),reporter=createCommonjsModule(function(a){var b=["api","success","time","code","msg","trace","traceId","begin","sid","seq"],c=function(a,b){var c=a.split("::");return 1<c.length?util_1.ext({group:c[0],key:c[1]},b):util_1.ext({group:"default_group",key:c[0]},b)},d=function(a){base.call(this,a);var b;try{b="object"==typeof performance?performance.timing.fetchStart:Date.now()}catch(a){b=Date.now()}return this._startTime=b,this};d.prototype=util_1.createObject(base.prototype),util_1.ext(base.dftCon,{startTime:null}),util_1.ext(d.prototype,{constructor:d,_super:base,sum:function(a,b,d){try{return this._lg("sum",c(a,{val:b||1,begin:Date.now()}),d)}catch(a){util_1.warn("[retcode] can not get parseStatData: "+a)}},avg:function(a,b,d){try{return this._lg("avg",c(a,{val:b||0,begin:Date.now()}),d)}catch(a){util_1.warn("[retcode] can not get parseStatData: "+a)}},percent:function(a,b,d,e){try{return this._lg("percent",c(a,{subkey:b,val:d||0,begin:Date.now()}),e)}catch(b){util_1.warn("[retcode] can not get parseStatData: "+b)}},msg:function(a,b){if(a&&!(180<a.length))return this.custom({msg:a},b)},error:function(b,c){if(!b)return util_1.warn("[retcode] invalid param e: "+b),this;1===arguments.length?("string"==typeof b&&(b={message:b},c={}),"object"==typeof b&&(c=b=b.error||b)):("string"==typeof b&&(b={message:b}),"object"!=typeof c&&(c={}));var d=b.name||"CustomError",f=util_1.encode(b.message),g=util_1.encode(b.stack||"");c=c||{};var a={begin:Date.now(),cate:d,msg:f.substring(0,1e3),stack:g&&g.substring(0,1e3),file:c.filename||"",line:c.lineno||"",col:c.colno||"",err:{msg_raw:f,stack_raw:g}},h=(this.getConfig("ignore")||{}).ignoreErrors;return util_1.ignoreByRule(a.msg,h)||util_1.ignoreByRule(util_1.decode(a.msg),h)?this:(this.beforeSend&&this.beforeSend("error",a),this._lg("error",a,1))},behavior:function(a){if(a){var b="object"==typeof a&&a.behavior?a:{behavior:a};return this.beforeSend&&this.beforeSend("behavior",b),this._lg("behavior",b,1)}},api:function(d,f,g,h,i,a,j,k){if(!d)return util_1.warn("[retcode] api is null"),this;if(d="string"==typeof d?{api:d,success:f,time:g,code:h,msg:i,begin:a,traceId:j,sid:k}:util_1.sub(d,b),!util_1.checkAPI(d.api))return this;if(d.code=d.code||"",d.msg=d.msg||"",d.success=d.success?1:0,d.time=+d.time,d.begin=d.begin,d.traceId=d.traceId||"",d.sid=d.sid||"",!d.api||isNaN(d.time))return util_1.warn("[retcode] invalid time or api"),this;var l=(this.getConfig("ignore")||{}).ignoreApis;if(util_1.ignoreByRule(d.api,l)||util_1.ignoreByRule(util_1.decode(d.api),l))return this;this.beforeSend&&this.beforeSend("api",d);var c={type:"api",data:{message:i,url:d.api,status:h||""},timestamp:a};try{this.getConfig("behavior")&&this.addBehavior&&this.addBehavior(c)}catch(a){}return this._lg("api",d,d.success&&this.getConfig("sample"))},speed:function(b,c,d){var e=this,f=this.getConfig("startTime")||this._startTime;return /^s(\d|1[0])$/.test(b)?(c="number"==typeof c?c>=f?c-f:c:Date.now()-f,e.speedCache=e.speedCache||{},e.speedCache[b]=c,e.speedCache.begin=f,clearTimeout(e.speedTimmer),e.speedTimmer=setTimeout(function(){d||(e.speedCache.page=e.getPage(!0)),e._lg("speed",e.speedCache),e.speedCache=null},5e3),e):(util_1.warn("[retcode] invalid point: "+b),e)},performance:function(a){if(a){var b={};for(var c in a)(/^t([1-9]|1[0])$/.test(c)||"ctti"==c||"cfpt"==c)&&(b[c]=a[c]);"{}"!==JSON.stringify(b)&&(this.cPerfData=b)}},resource:function(b,c){if(!b||!util_1.isPlainObject(b))return util_1.warn("[arms] invalid param data: "+b),this;var d=Object.keys(b),e=["begin","dom","load","res","dl"],f=!1;for(var g in e)if(0>d.indexOf(e[g])){f=!0;break}if(f)return util_1.warn("[arms] lack param data: "+b),this;var h={begin:b.begin||Date.now(),dom:b.dom||"",load:b.load||"",res:util_1.isArray(b.res)?JSON.stringify(b.res):JSON.stringify([]),dl:b.dl||""};return this._lg("res",h,c)}}),d._super=base,d._root=base,base.Reporter=d,a.exports=d}),sender=createCommonjsModule(function(a){var b="object"==typeof window?window:{},d=b.__oFetch_||b.fetch;d="function"==typeof d?d:void 0,a.exports=function(a,f){var g=-1;"object"==typeof a&&(g=a.z,a=util_1.serialize(a));var h=f+a;if(d)return d(h,{method:"HEAD",mode:"no-cors"})["catch"](util_1.noop);if(b.document&&b.document.createElement){var j="__request_hold_"+g,c=b[j]=new Image;c.onload=c.onerror=function(){b[j]=void 0},c.src=h,c=null}}}),post=createCommonjsModule(function(a){var b="object"==typeof window?window:{},c=b.__oXMLHttpRequest_||b.XMLHttpRequest;c="function"==typeof c?c:void 0,a.exports=function(a,b){try{var d=new c;d.open("POST",b,!0),d.setRequestHeader("Content-Type","text/plain"),d.send(JSON.stringify(a))}catch(a){util_1.warn("[retcode] Failed to log, exception is :\n"+a)}}}),behavior=function(b,d){var f,g=[],j=null,k=d&&d.location&&d.location.href,m=0,p=null,q=function(a,b,c){if(null!==a){var d=a[b];a[b]=c(d)}},c=function(b){var c,d,e,f,g,h=[];if(!b||!b.tagName)return"";if(h.push(b.tagName.toLowerCase()),b.id&&h.push("#".concat(b.id)),(c=b.className)&&"[object String]"===Object.prototype.toString.call(c))for(d=c.split(/\s+/),g=0;g<d.length;g++)h.push(".".concat(d[g]));var i=["type","name","title","alt"];for(g=0;g<i.length;g++)e=i[g],(f=b.getAttribute(e))&&h.push("[".concat(e,"=\"").concat(f,"\"]"));return h.join("")},e=function(b,d){return function(e){if(e&&e!==p){p=e;var g;try{g=e.target}catch(a){g="<unknown>"}if(0!==g.length){var h={type:"ui.".concat(b),data:{message:function(b){if(!b||1!==b.nodeType)return"";for(var d=b||null,e=[],f=0,g=0,h="";d&&5>f++&&!("html"===(h=c(d))||1<f&&80<=g+e.length*3+h.length);)e.push(h),g+=h.length,d=d.parentNode;return e.reverse().join(" > ")}(g)},timestamp:Date.now()};"click"===b?(m&&clearTimeout(m),d?m=setTimeout(function(){j&&j.addBehavior(h)},0):j&&j.addBehavior(h)):"keypress"==b&&(f||j&&j.addBehavior(h),clearTimeout(f),f=setTimeout(function(){f=void 0},100))}}}},l=function(){if(function(){var a=d&&d.chrome,b=a&&a.app&&a.app.runtime,c="history"in d&&!!d.history.pushState&&!!d.history.replaceState;return!b&&c}()){var a=function(a,b){j&&j.addBehavior({type:"navigation",data:{from:a,to:b}}),k=b},b=d.onpopstate;d.onpopstate=function(){for(var c=arguments.length,e=Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=d.location.href;if(a(k,g),b)return b.apply(this,e)};var c=function(b){return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=2<d.length?d[2]:void 0;return f&&a(k,f+""),b.apply(this,d)}};q(d.history,"pushState",c),q(d.history,"replaceState",c)}};util_1.ext(b.prototype,{addBehavior:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=1<arguments.length?arguments[1]:void 0;if(this.getConfig("behavior")){var f=c&&0<c?min(c,100):100;return(b=util_1.ext({},{type:"default",data:{},timestamp:Date.now(),page:d&&d.location&&d.location.pathname},b)).data&&b.data.message&&(b.data.message=util_1.encode(b.data.message)),g.push(b),g=g.slice(-f)}},getBehavior:function(){return g||[]},setBehavior:function(a){return a&&(g=a),g},reportBehavior:function(a){var b=this;b.getConfig("behavior")&&(b.sendBhTimer=setTimeout(function(){g&&0<g.length&&(b.behavior(g),g=[],b.sendBhTimer=void 0,a&&a())},0))},initBehavior:function(){return this.hasInitBehavior||j||(!function(){if(document&&document.referrer&&document.location){var a=document.referrer,b=document.location.href;if(""!==a){k=b,j&&j.addBehavior({type:"navigation",data:{from:a,to:b}})}}}(),function(){if(d&&d.console)for(var b,c=["debug","info","warn","log","error","assert"],e=0;c.length;e++){if(b=c[e],!d.console[b])return;q(d.console,b,function(f){var e=b;return function(){for(var b=arguments.length,a=Array(b),g=0;g<b;g++)a[g]=arguments[g];if(j&&j.addBehavior({type:"console",data:{level:e,message:a}}),"error"===e)for(var h,k=0;k<a.length;k++)h=a[k],h&&h.message&&h.stack&&j&&j.errorHandler(new ErrorEvent("error",{error:h,message:h.message}));f&&Function.prototype.apply.call(f,d.console,a)}})}}(),d&&d.document&&d.document.addEventListener&&(d.document.addEventListener("click",e("click"),!1),d.document.addEventListener("keypress",e("keypress"),!1)),l(),j=this,this.hasInitBehavior=!0),this}})},TIMING_KEYS=["","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart"],constants={TIMING_KEYS:TIMING_KEYS},TIMING_KEYS$1=constants.TIMING_KEYS,perf=function(){var b=util_1.win||{},d=b.performance;if(!d||"object"!=typeof d)return null;var g={},e=d.timing||{},h=Date.now(),j=1;if("function"==typeof b.PerformanceNavigationTiming){var a=d.getEntriesByType("navigation")[0];a&&(e=a,j=2)}util_1.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(b,c){var d=e[TIMING_KEYS$1[b[1]]],a=e[TIMING_KEYS$1[b[0]]];if(2==j||0<d&&0<a){var f=Math.round(a-d);0<=f&&36e5>f&&(g[c]=f)}});var k=b.navigator.connection,l=d.navigation||{};g.ct=k?k.effectiveType||k.type:"";var f=k?k.downlinkMax||k.bandwidth||-1:-1;if(f=999<f?999:f,g.bandwidth=f,g.navtype=1===l.type?"Reload":"Other",1==j&&0<e[TIMING_KEYS$1[16]]&&0<e[TIMING_KEYS$1[1]]){var m=e[TIMING_KEYS$1[16]]-e[TIMING_KEYS$1[1]];0<=m&&36e5>m&&(g.fpt=m)}return g.begin=1==j&&0<e[TIMING_KEYS$1[1]]?e[TIMING_KEYS$1[1]]:2==j&&0<g.load?h-g.load:h,g},TIMING_KEYS$2=constants.TIMING_KEYS,res=function(){var a=util_1.win||{},b=a.performance;if(!b||"object"!=typeof b||"function"!=typeof b.getEntriesByType)return null;var c={},d=b.timing||{},e=b.getEntriesByType("resource")||[];if(c.begin=d[TIMING_KEYS$2[1]]||Date.now(),"function"==typeof a.PerformanceNavigationTiming){var f=b.getEntriesByType("navigation")[0];f&&(d=f)}return util_1.each({dom:[10,8],load:[14,1]},function(b,f){var e=d[TIMING_KEYS$2[b[1]]],g=d[TIMING_KEYS$2[b[0]]];if(0<e&&0<g){var h=Math.round(g-e);0<=h&&36e5>h&&(c[f]=h)}}),c.res=JSON.stringify(e),c},handler=function(a,b,i){var j=util_1,k=null,m=i.documentElement,e=b.innerWidth||m.clientWidth||i.body.clientWidth,h=b.innerHeight||m.clientHeight||i.body.clientHeight,c=b.navigator.connection,d={sr:screen.width+"x"+screen.height,vp:e+"x"+h,ct:c?c.effectiveType||c.type:""},l={},p=function(b,d,e,a,f){if(d===void 0){var g,k;if(!l[b]){g=new RegExp(b+"=([^;]+)");try{k=g.exec(i.cookie)}catch(a){return j.warn("[retcode] can not get cookie:",a),null}k&&(l[b]=k[1])}return l[b]}var m=b+"="+d;a&&(m+="; domain="+a),m+="; path="+(f||"/"),e&&(m+="; max-age="+e);try{return i.cookie=m,!!i.cookie}catch(a){return j.warn("[retcode] can not set cookie: ",a),!1}},f=function(a){var b=a._conf.uid||p("_nk_")||p("_bl_uid");return!b&&(b=j.uu(),!p("_bl_uid",b,15552e3))?null:b};return j.ext(a.prototype,{activeErrHandler:function(a){return k&&!a?this:(k=this,this)},errorHandler:function(a){if(!a)return this;var b=a.type;"error"===b?this.error(a.error||{message:a.message},a):"unhandledrejection"===b&&j.T(a.reason,"Error")&&j.checkAutoError(a.reason)&&this.error(a.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch(a){}return this},sendPerformance:function(a){var b=this;b.onReady(function(){var c=perf();c&&(c.page=b.getPage(!0),a&&(c=j.ext(c,a)),b.cPerfData&&(c=j.ext(c,b.cPerfData)),b._lg("perf",c,b.getConfig("sample")))})},sendResources:function(a){var b=this;b.onReady(function(){var c=res();c&&(c.load&&2e3>=c.load||c.load&&8e3>=c.load&&.05<Math.random()||(c.page=b.getPage(!0),c.dl=location.href,a&&(c=j.ext(c,a)),b._lg("res",c,b.getConfig("sample"))))})},sendPV:function(){var a=this;a.onReady(function(){var c=function(c){var d=f(c),e=b.devicePixelRatio||1;return{uid:d,dt:i.title,dl:location.href,dr:i.referrer,dpr:e.toFixed(2),de:(i.characterSet||i.defaultCharset||"").toLowerCase(),ul:m.lang,begin:Date.now()}}(a);c&&c.uid&&a._lg("pv",c)})},commonInfo:function(){return d.uid=f(this),d},handleUnload:function(a){var b=Date.now();return 200>b-this._lastUnload?this:void(this._lastUnload=b,this.sendHealth(a),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this.clear())},bindHashChange:function(a){var c=this;return!a^c.hashChangeHandler?c:void(a?(c.hackHistoryState(),c.hashChangeHandler=function(a){var b=c._conf.parseHash(location.hash);b&&c.setPage(b,!1!==a)},c.stateChangeHandler=function(a){var b=c._conf.parseHash(a.detail);b&&c.setPage(b)},j.on(b,"hashchange",c.hashChangeHandler),j.on(b,"historystatechange",c.stateChangeHandler),c.hashChangeHandler(!1)):(j.off(b,"hashchange",c.hashChangeHandler),j.off(b,"historystatechange",c.stateChangeHandler),c.hashChangeHandler=null,c.stateChangeHandler=null))},initHandler:function(){var a=this;if(a.hasInitHandler)return a;var c=a._conf;return j.on(b,"beforeunload",function(){a.handleUnload(0)}),a.bindHashChange(c.enableSPA),a.activeErrHandler(!1),a.hasInitHandler=!0,a}}),j.on(b,"error",function(a){k&&k.errorHandler(a)}).on(b,"unhandledrejection",function(a){k&&k.errorHandler(a)}),a},checkInterval=500,fmp=function(b,d,f){function g(b,d,e){var f=0,h=b.tagName;if("SCRIPT"!==h&&"STYLE"!==h&&"META"!==h&&"HEAD"!==h){var k=b.children?b.children.length:0;if(0<k)for(var c=b.children,a=k-1;0<=a;a--)f+=g(c[a],d+1,0<f);if(0>=f&&!e&&!(b.getBoundingClientRect&&b.getBoundingClientRect().top<j))return 0;f+=1+.5*d}return f}function h(a){for(var b=1;b<a.length;b++)if(a[b].score<a[b-1].score)return a.splice(b,1),h(a);return a}var j=d.innerHeight||0,k=[],m=null,p=0;util_1.ext(b.prototype,{initFmpObserver:function(a){var b=this;if(!b._conf||!b._conf.useFmp)return null;if(!d.MutationObserver)return util_1.warn("[retcode] first meaningful paint can not be retrieved"),b.sendPerformance(),null;util_1.on(d,"beforeunload",function(){b.endObserving(0,!0)});var c=d.MutationObserver;return(m=new c(function(){!function(a){var b=Date.now()-a,c=f.querySelector("body");if(c){var d=0;d+=g(c,1,!1),k.push({score:d,t:b})}else k.push({score:0,t:b})}(b._startTime)})).observe(document,{childList:!0,subtree:!0}),p=1,b.onReady(function(){b.endObserving(a)}),m},endObserving:function(a,b){var c=this;if(m&&p)if(b||!function(a,b){var c=Date.now()-a;return!(c>b||c-(k&&k.length&&k[k.length-1].t||0)>2*checkInterval)}(c._startTime,a)){m.disconnect(),p=0,k=h(k);for(var d=null,e=1;e<k.length;e++)if(k[e].t>=k[e-1].t){var f=k[e].score-k[e-1].score;(!d||d.rate<=f)&&(d={t:k[e].t,rate:f})}d&&0<d.t&&36e5>d.t?c.sendPerformance({fmp:d.t}):c.sendPerformance()}else util_1.delay(function(){c.endObserving(a)},checkInterval)}})},hook=function(b,j){var k=util_1,m=null,q=function(a,b,d,e,j,m,i,n,o,l){var c=k.J(j)||null,g=k.safetyCall(b,[c,e],null);if(!g)return!1;var p=g.code||m,f=!("success"in g)||g.success;a.api(d,f,i,p,g.msg,n,o,l)};return k.ext(b.prototype,{removeHook:function(b,c){return m&&(c||this===m)?(j.__oFetch_&&(j.fetch=j.__oFetch_,delete j.__oFetch_),j.__oXMLHttpRequest_&&(j.XMLHttpRequest=j.__oXMLHttpRequest_,delete j.__oXMLHttpRequest_),m=null,this):this},addHook:function(a){return!a&&m?this:(m||(function(){if("function"==typeof j.fetch){var a=j.fetch;j.__oFetch_=a,j.fetch=function(b,e){var i=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),r=m;if(!r||!r.api)return a.apply(j,i);if(e&&("HEAD"===e.method||"no-cors"===e.mode))return a.apply(j,i);var p=Date.now(),l=r._conf,c=(b&&"string"!=typeof b?b.url:b)||"",n=c;if(c=k.cutUrlSearch(c),!k.checkAPI(c,!0))return a.apply(j,i);c=k.filterByRule(c,l.ignoreApiPath?l.ignoreApiPath:l.apiHelper);var o=l.enableLinkTrace,f="",s="",t=r.getConfig("pid");if(o){var d="";try{d=location.origin?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(a){d=""}if(k.checkSameOrigin(n,d)){if(b&&"string"!=typeof b)try{if(i[0].headers&&"function"==typeof i[0].headers.get&&"function"==typeof i[0].headers.append){var u=i[0].headers.get("EagleEye-TraceID"),w=i[0].headers.get("EagleEye-SessionID"),x=i[0].headers.get("EagleEye-pAppName");u?f=u:(f=r.getTraceId()["EagleEye-TraceID"],i[0].headers.append("EagleEye-TraceID",f)),w?s=w:(s=r.getSessionId()["EagleEye-SessionID"],i[0].headers.append("EagleEye-SessionID",s)),x||i[0].headers.append("EagleEye-pAppName",t)}}catch(a){k.warn("[retcode] fetch failed to set header, exception is :\n"+a)}e&&(e.headers=e.headers?e.headers:{},e.headers["EagleEye-TraceID"]?f=e.headers["EagleEye-TraceID"]:(f=r.getTraceId()["EagleEye-TraceID"],e.headers["EagleEye-TraceID"]=f),e.headers["EagleEye-SessionID"]?s=e.headers["EagleEye-SessionID"]:(s=r.getSessionId()["EagleEye-SessionID"],e.headers["EagleEye-SessionID"]=s),e.headers["EagleEye-pAppName"]||(e.headers["EagleEye-pAppName"]=t))}}return a.apply(j,i).then(function(b){if(!r||!r.api)return b;var d=b.clone(),e=d.headers;if(e&&"function"==typeof e.get){var a=e.get("content-type");if(a&&!/(text)|(json)/.test(a))return b}var g=Date.now()-p;return d.ok?d.text().then(function(a){q(r,l.parseResponse,c,n,a,d.status||200,g,p,f,s)}):r.api(c,!1,g,d.status||404,d.statusText,p,f,s),b})["catch"](function(a){if(!r||!r.api)throw a;var b=Date.now()-p;throw r.api(c,!1,b,a.name||"Error",a.message,p,f,s),a})},j.fetch.toString=k.createFakeToString("fetch")}}(),function(){if("function"==typeof j.XMLHttpRequest){var a=j.XMLHttpRequest;j.__oXMLHttpRequest_=a,j.XMLHttpRequest=function(b){var j=new a(b),n=m;if(!n||!n.api||!j.addEventListener)return j;var i,o,v,r=j.send,c=j.open,e=j.setRequestHeader,g=n._conf,f=n.getConfig("enableLinkTrace"),h="",u="",t="";return j.open=function(a,b){var d=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);if(c.apply(j,d),v=b||"",o=k.cutUrlSearch(v),o=o?k.filterByRule(o,g.ignoreApiPath?g.ignoreApiPath:g.apiHelper):"",f){var i="";try{i=location.origin?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(a){i=""}k.checkSameOrigin(v,i)&&e&&"function"==typeof e&&(h=n.getTraceId()["EagleEye-TraceID"],e.apply(j,["EagleEye-TraceID",h]),u=n.getSessionId()["EagleEye-SessionID"],e.apply(j,["EagleEye-SessionID",u]),t=n.getConfig("pid"),e.apply(j,["EagleEye-pAppName",t]))}},j.send=function(){i=Date.now();var a=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);r.apply(j,a)},k.on(j,"readystatechange",function(){if(o&&4===j.readyState){var b=Date.now()-i;if(200<=j.status&&299>=j.status){var c=j.status||200;if("function"==typeof j.getResponseHeader){var d=j.getResponseHeader("Content-Type");if(d&&!/(text)|(json)/.test(d))return}j.responseType&&"text"!==j.responseType?n.api(o,!0,b,c,"",i,h,u):q(n,g.parseResponse,o,v,j.responseText,c,b,i,h,u)}else n.api(o,!1,b,j.status||"FAILED",j.statusText,i,h,u)}}),j},j.XMLHttpRequest.toString=k.createFakeToString("XMLHttpRequest")}}()),m=this,this)},initHook:function(){return this.hasInitHook?this:(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0,this)}}),b},hack=function(b,c){var g=util_1,d=c.history||{},e=c.document,a=function(b,d){var f;c.CustomEvent?f=new CustomEvent(b,{detail:d}):((f=e.createEvent("HTMLEvents")).initEvent(b,!1,!0),f.detail=d),c.dispatchEvent(f)},f=function(b){var i=d[b];"function"==typeof i&&(d[b]=function(e,j,k){var c=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),m=location.href,n=i.apply(d,c);if(!k||"string"!=typeof k)return n;if(k===m)return n;try{var h=m.split("#"),l=k.split("#"),o=g.cutUrlSearch(h[0]),p=g.cutUrlSearch(l[0]),f=h[1]&&h[1].replace(/^\/?(.*)/,"$1"),q=l[1]&&l[1].replace(/^\/?(.*)/,"$1");o===p?f!==q&&a("historystatechange",q):a("historystatechange",p)}catch(a){g.warn("[retcode] error in "+b+": "+a)}return n},d[b].toString=g.createFakeToString(b))};g.ext(b.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState?this:(f("pushState"),f("replaceState"),this.hasHackedHistoryState=!0,this)}})},clazz=createCommonjsModule(function(a){var b=util_1.win,c=b.document,d=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,e=function(a){var c=this;return reporter.call(c,a),c._initialPage=a.page&&util_1.safetyCall(a.page,[],a.page+"")||null,c._health={errcount:0,apisucc:0,apifail:0},c.beforeSend=function(a,b){"error"===a?c._health.errcount++:"api"==a&&c._health[b.success?"apisucc":"apifail"]++},!1!==a.enableInstanceAutoSend&&(c.initHandler(),c.initHook(),c.initFmpObserver(1e4),c._conf&&c._conf.behavior&&c.initBehavior()),Object.defineProperty&&b.addEventListener&&Object.defineProperty(c,"pipe",{set:c.sendPipe}),c};e.prototype=util_1.createObject(reporter.prototype),util_1.ext(reporter._root.dftCon,{uid:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],apiHelper:{rule:/(\w+)\/\d{2,}/g,target:"$1"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",disableHook:!1,autoSendPv:!0,enableSPA:!1,enableLinkTrace:!1,sendResource:!0,behavior:!0,parseHash:function(a){return(a?util_1.cutUrlSearch(a.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(a){if(!a||"object"!=typeof a)return{};var b=a.code,c=a.msg||a.message||a.subMsg||a.errorMsg||a.ret||a.errorResponse||"";return"object"==typeof c&&(b=b||c.code,c=c.msg||c.message||c.info||c.ret||JSON.stringify(c)),{msg:c,code:b,success:!0}}}),util_1.ext(e.prototype,{constructor:e,_super:reporter,onReady:function(a){var d=this;return d.hasReady?a():void("complete"===c.readyState?(d.hasReady=!0,a()):util_1.on(b,"load",function(){d.hasReady=!0,a()},!0))},getPage:function(a){var b=this._conf,c=b.page,d=location,e=d.host+d.pathname;return c&&!a?util_1.safetyCall(c,[],c+""):this._initialPage||util_1.filterByRule(b.ignoreUrlCase?e.toLowerCase():e,b.ignoreUrlPath?b.ignoreUrlPath:b.urlHelper)},setPage:function(a,b){var c=this,d=c.prevPage;if(!1!==b){if(!a||a===d)return c;c.prevPage=a,clearTimeout(c.sendPVTimmer),c.handleUnload(1),c.resetSession(),c.sendPVTimmer=setTimeout(function(){c.sendPV()},10)}else c.prevPage=a;return c._conf.page=a,c},setConfig:function(a,b){if(a&&"object"==typeof a){util_1.verifyConfig(a),a=this.setImgUrl(a);var c=this._conf;if(this._conf=util_1.ext({},c,a),!b){var d="disableHook";d in a&&c[d]!==a[d]&&(a[d]?this.removeHook():this.addHook()),(d="enableSPA")in a&&c[d]!==a[d]&&this.bindHashChange(a[d])}}},sendRequest:function(a){sender(a,this.getConfig("imgUrl"))},postData:function(a,b){var c={};c[b]=a[b],delete a[b];var d="";"object"==typeof a&&(d=util_1.serialize(a)),post(c,this.getConfig("imgUrl")+d+"&post_res=")},sendPipe:function(a){var b=this;if(!a||!a.length)return b;try{if("Array"===util_1.T(a[0]))return util_1.each(a,function(a){return b.sendPipe(a)});if("Array"!==util_1.T(a))return b;var c=a.shift();if(!d.test(c))return b;b[c].apply(b,a)}catch(a){return util_1.warn("[retcode] error in sendPipe",a),b}},sendHealth:function(){var a=util_1.ext({},this._health);a.healthy=0<a.errcount?0:1,a.begin=Date.now();var b=a.begin-this.sBegin;a.stay=b,this._lg("health",a,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(a){a=util_1.ext({pid:this._conf.pid},a);var b=this.__proto__.constructor(a);return a.page&&b.sendPV(),b}}),behavior(e,b),handler(e,b,c),fmp(e,b,c),hook(e,b),hack(e,b),e._super=reporter,e._root=reporter._root,reporter.Browser=e,a.exports=e}),lib=createCommonjsModule(function(a){function b(a,b){var c=d[g]=new f(a);c.sendPipe(b);var e=c._conf;return!1!==e.autoSendPv&&c.sendPV(),e&&e.useFmp||c.sendPerformance(),e&&e.sendResource&&c.sendResources(),d[h]=!0,c}function c(){if(d[h])return d[g];var a={},c=[];return g in d&&(a=d[g].config||{},c=d[g].pipe||[]),b(a,c)}var d=window,f=d.BrowserLogger=clazz,g=util_1.key,h="__hasInitBlSdk";f.singleton=function(a,c){return d.__hasInitBlSdk?d[g]:b(a,c)},f.createExtraInstance=function(a){a&&"object"==typeof a&&!0!==a.enableInstanceAutoSend&&(a.enableInstanceAutoSend=!1);var b=new f(a),c=b._conf;return c.enableInstanceAutoSend&&(!1!==c.autoSendPv&&b.sendPV(),c&&c.useFmp||b.sendPerformance(),c&&c.sendResource&&b.sendResources()),b};var i="object"==typeof window&&!!window.navigator;i&&d[g]&&(f.bl=c(d.__hasInitBlSdk)),a.exports=f});const classifyRE=/(?:^|[-_])(\w)/g,classify=a=>a.replace(classifyRE,a=>a.toUpperCase()).replace(/[-_]/g,""),formatComponentName=(a,b)=>{if(a.$root===a)return"<Root>";const c="function"==typeof a&&null!=a.cid?a.options:a._isVue?a.$options||a.constructor.options:a;let d=c.name||c._componentTag;const e=c.__file;if(!d&&e){const a=e.match(/([^/\\]+)\.vue$/);d=a&&a[1]}return(d?`<${classify(d)}>`:"<Anonymous>")+(e&&!1!==b?` at ${e}`:"")},repeat=(a,b)=>{let c="";for(;b;)1==b%2&&(c+=a),1<b&&(a+=a),b>>=1;return c},generateComponentTrace=a=>{if(a._isVue&&a.$parent){const b=[];for(let c=0;a;){if(0<b.length){const d=b[b.length-1];if(d.constructor===a.constructor){c++,a=a.$parent;continue}else 0<c&&(b[b.length-1]=[d,c],c=0)}b.push(a),a=a.$parent}return`\n\nfound in\n\n${b.map((a,b)=>`${0===b?"---> ":repeat(" ",5+2*b)}${Array.isArray(a)?`${formatComponentName(a[0])}... (${a[1]} recursive calls)`:formatComponentName(a)}`).join("\n")}`}return`\n\n(found in ${formatComponentName(a)})`};class VueArams{constructor({pipe:a,...b},c){if(this.config=b||{},this.pipe=a,this.useArmsEnvs=c,!c||c&&c.includes("production")){const c=Object.assign({},b);try{if(c.pid)return this.logger=lib.singleton(c,a),this.logger.install=this.install,this.logger;throw new Error("cannot find pid")}catch(a){throw a}}}install(a,b={}){const{useArmsEnvs:c=this.useArmsEnvs}=b;if(!c||c&&c.includes("production")){const b=a.config.errorHandler;a.config.errorHandler=(a,c,d)=>{if(this.error(a,{filename:`${c.$vnode.tag}, ${d}`}),"undefined"!=typeof console&&"function"==typeof console.error&&!1){const b=c?generateComponentTrace(c):"",e=`Error in ${d}: "${a.toString()}"`;console.error(`[Vue warn]: ${e}${b}`)}"function"==typeof b&&b.call(this,a,c,d)},window.addEventListener("error",a=>{this.error(a.error,a)}),window.addEventListener("unhandledrejection",a=>{this.error(a.error,a)}),a.prototype.$logger=this}}}export default VueArams;
